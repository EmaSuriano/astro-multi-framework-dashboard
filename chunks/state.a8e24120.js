let n=[],f=u=>{let r,t=[],e={lc:0,value:u,set(l){e.value=l,e.notify()},get(){return e.lc||e.listen(()=>{})(),e.value},notify(l){r=t;let s=!n.length;for(let i=0;i<r.length;i++)n.push(r[i],e.value,l);if(s){for(let i=0;i<n.length;i+=3)n[i](n[i+1],n[i+2]);n.length=0}},listen(l){return t===r&&(t=t.slice()),e.lc=t.push(l),()=>{t===r&&(t=t.slice());let s=t.indexOf(l);~s&&(t.splice(s,1),e.lc--)}},subscribe(l){let s=e.listen(l);return l(e.value),s},off(){}};return e};const a=f(!1);export{a as i};
